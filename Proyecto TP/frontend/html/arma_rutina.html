<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet"href="https://cdn.jsdelivr.net/npm/bulma@1.0.4/css/bulma.min.css">
         <!-- CSS -->
        <link rel="stylesheet" href="../css/style.css">
        <title>Arma rutina</title>
    </head>
    <body>
        <div class="container">
            <div class="content"><h1>Hola</h1></div>
        </div>
        <table class="table">
            <thead>
                <tr>
                    <th>Dia de la Semana </th>
                    <th>Objetivo</th>
                    <th>Nivel Usuario</th>
                    <th>Duracion</th>
                    <th>Descripcion</th>
                    <th>Editar</th>
                    <th>Borrar</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
        <script>
            const arma_rutinaBackURL = "http://localhost:3000/api/entrenamientos";

            fetch(arma_rutinaBackURL).then((response) => { // se va a consultar al back
                return response.json();
            }).then((data) => { // una vez que consulta vuelve con la data
                const table = document.querySelector("tbody");
                data.forEach(Entrenamiento => {
                    const newRow = document.createElement("tr");

                    const DiaSemana = document.createElement("td"); // Dia de la Semana
                    DiaSemana.innerHTML = Entrenamiento.dia_semana;
                    newRow.appendChild(DiaSemana);

                    const Objetivo = document.createElement("td"); // Objetivo
                    Objetivo.innerHTML = Entrenamiento.objetivo;
                    newRow.appendChild(Objetivo);

                    const NivelUsuario = document.createElement("td"); // Nivel Usuario
                    NivelUsuario.innerHTML = Entrenamiento.nivel_usuario ?? "-";
                    newRow.appendChild(NivelUsuario);

                    const Duracion = document.createElement("td"); // Duracion
                    Duracion.innerHTML = Entrenamiento.duracion_minutos ?? "-";
                    newRow.appendChild(Duracion);

                    const Descripcion = document.createElement("td"); // Descripcion
                    Descripcion.innerHTML = Entrenamiento.descripcion ?? "-";
                    newRow.appendChild(Descripcion);

                    const NewEditar = document.createElement("td"); // Editar
                    const EditarLink = document.createElement("a");
                    EditarLink.innerHTML = "Editar";
                    EditarLink.href = "ejercicios.html?id=" + Entrenamiento.id; // id= querry param
                    NewEditar.appendChild(EditarLink);
                    newRow.appendChild(NewEditar);
            
                    const NewBorrar = document.createElement("td"); // Borrar
                    const BorrarLink = document.createElement("a");
                    BorrarLink.innerHTML = "Borrar";
                    BorrarLink.href = "#";
                    NewBorrar.appendChild(BorrarLink);
                    newRow.appendChild(NewBorrar);

                    table.appendChild(newRow);
                });
                console.log(data);
            });

        </script>
    </body>
</html>